<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Sopa de Letras – IOA</title>

<style>
    body {
        font-family: Arial;
        background: #f6f6f6;
        text-align: center;
        padding: 20px;
    }
    table {
        margin: auto;
        border-collapse: collapse;
    }
    td {
        width: 32px;
        height: 32px;
        border: 1px solid #333;
        font-size: 20px;
        text-align: center;
        cursor: pointer;
        background: white;
        user-select: none;
    }
    td.selected { background: #ffcc00; }
    td.found { background: #4caf50; color: white; }
    #word-list { margin-top: 20px; font-size: 18px; }
    .found-word { color: green; font-weight: bold; text-decoration: line-through; }
</style>
</head>

<body>

<h1>Sopa de Letras – IOA</h1>

<p><b>Busca las siguientes palabras:</b></p>
<div id="word-list">
hidrotermal, hierro, apatito, magnetita, hematita, actinolita, subduccion, arcovolcanico, alteracion, propilitica, sodicocalcica, metasomatismo, brechas
</div>

<br>

<table id="grid"></table>

<script>
// Palabras a buscar
const words = [
    "hidrotermal","hierro","apatito","magnetita","hematita",
    "actinolita","subduccion","arcovolcanico","alteracion",
    "propilitica","sodicocalcica","metasomatismo","brechas"
];

// MATRIZ (la sopa)
const puzzle = [
"HTEAMITAQZPLOSU",
"ACTINOLITARXEMT",
"MAGNETITAPORYIC",
"PROPILITICAZFBR",
"SODICOCALCICAGU",
"ALTERACIONRPKOX",
"BRECHASUDWJHLAN",
"SUBDUCCIONTEPLA",
"ARCOVOLCANICOSD"
];

let grid = document.getElementById("grid");
let selected = [];
let isDragging = false;

// Crear la tabla
puzzle.forEach((row, r) => {
    let tr = document.createElement("tr");
    row.split("").forEach((letter, c) => {
        let td = document.createElement("td");
        td.textContent = letter;
        td.dataset.row = r;
        td.dataset.col = c;

        td.addEventListener("mousedown", startSelect);
        td.addEventListener("mouseover", continueSelect);
        document.addEventListener("mouseup", endSelect);

        tr.appendChild(td);
    });
    grid.appendChild(tr);
});

// Empezar selección
function startSelect(e){
    clearSelection();
    isDragging = true;
    e.target.classList.add("selected");
    selected.push(e.target);
}

// Arrastrar
function continueSelect(e){
    if(isDragging && e.target.tagName === "TD"){
        e.target.classList.add("selected");
        selected.push(e.target);
    }
}

// Finalizar selección
function endSelect(){
    if(!isDragging) return;
    isDragging = false;
    checkWord();
}

// Verificar palabra formada
function checkWord(){
    let formed = selected.map(td => td.textContent).join("").toLowerCase();

    for(let w of words){
        if(formed === w || formed === [...w].reverse().join("")){
            selected.forEach(td => td.classList.add("found"));
            markFound(w);
        }
    }
    clearSelection();
}

// Marcar palabra encontrada en la lista
function markFound(word){
    let list = document.getElementById("word-list").innerHTML;
    document.getElementById("word-list").innerHTML =
        list.replace(word, `<span class='found-word'>${word}</span>`);
}

// Limpiar selección visual
function clearSelection(){
    document.querySelectorAll(".selected").forEach(td => td.classList.remove("selected"));
    selected = [];
}
</script>

</body>
</html>
